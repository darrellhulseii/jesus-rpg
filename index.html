<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Battle for Virtue - Complete Edition</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600;700&family=Cinzel:wght@600;700&display=swap');
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            position: fixed;
        }
        body {
            font-family: 'Crimson Text', serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #2d1b4e 100%);
            color: #fff;
            touch-action: none;
        }
        /* Responsive Container */
        .responsive-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        /* Enhanced Sprites */
        .sprite {
            position: relative;
            width: min(10vw, 100px);
            height: min(12vw, 120px);
        }
        .sprite-guardian::before {
            content: '‚òÉÔ∏è';
            font-size: clamp(50px, 8vw, 80px);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            filter: drop-shadow(0 0 20px rgba(135, 206, 235, 0.9));
            animation: snowmanGlow 3s ease-in-out infinite;
        }
        @keyframes snowmanGlow {
            0%, 100% {
                filter: drop-shadow(0 0 20px rgba(135, 206, 235, 0.9));
                transform: translate(-50%, -50%) scale(1);
            }
            50% {
                filter: drop-shadow(0 0 35px rgba(135, 206, 235, 1));
                transform: translate(-50%, -50%) scale(1.05);
            }
        }
        .sprite-angel::before {
            content: 'üòá';
            font-size: clamp(50px, 8vw, 80px);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            filter: drop-shadow(0 0 25px rgba(255, 215, 0, 1));
            animation: angelGlow 2.5s ease-in-out infinite;
        }
        @keyframes angelGlow {
            0%, 100% {
                filter: drop-shadow(0 0 25px rgba(255, 215, 0, 1));
            }
            50% {
                filter: drop-shadow(0 0 45px rgba(255, 215, 0, 1)) drop-shadow(0 0 60px rgba(255, 255, 255, 0.5));
            }
        }
        .sprite-angel::after {
            content: '';
            position: absolute;
            top: -5%;
            left: 50%;
            transform: translateX(-50%);
            width: 70%;
            height: 15%;
            border: clamp(2px, 0.3vw, 3px) solid #FFD700;
            border-radius: 50%;
            box-shadow: 0 0 30px #FFD700, inset 0 0 15px #FFD700;
            animation: haloGlow 2s ease-in-out infinite;
        }
        @keyframes haloGlow {
            0%, 100% {
                box-shadow: 0 0 30px #FFD700, inset 0 0 15px #FFD700;
                opacity: 0.8;
            }
            50% {
                box-shadow: 0 0 50px #FFD700, inset 0 0 25px #FFD700;
                opacity: 1;
            }
        }
        .sprite-enemy {
            font-size: clamp(60px, 10vw, 100px);
            display: flex;
            align-items: center;
            justify-content: center;
            filter: drop-shadow(0 0 30px rgba(255, 0, 0, 1));
            animation: enemyPulse 2s ease-in-out infinite;
        }
        @keyframes enemyPulse {
            0%, 100% {
                filter: drop-shadow(0 0 30px rgba(255, 0, 0, 1));
                transform: scale(1);
            }
            50% {
                filter: drop-shadow(0 0 50px rgba(255, 0, 0, 1));
                transform: scale(1.08);
            }
        }
        /* Saint Modal with Image */
        #saintModal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1700;
            padding: clamp(15px, 3vw, 40px);
        }
        #saintModal.active {
            display: flex;
            animation: modalFadeIn 0.6s ease-out;
        }
        @keyframes modalFadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        .saint-content {
            max-width: min(95vw, 900px);
            width: 100%;
            background: linear-gradient(135deg, rgba(15, 12, 41, 0.98), rgba(48, 43, 99, 0.98));
            padding: clamp(25px, 5vw, 50px);
            border: clamp(3px, 0.5vw, 5px) solid #FFD700;
            border-radius: clamp(15px, 2vw, 20px);
            box-shadow: 0 0 70px rgba(255, 215, 0, 0.9);
            text-align: center;
            position: relative;
            overflow: hidden;
            max-height: 90vh;
            overflow-y: auto;
        }
        .saint-content::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.15) 0%, transparent 70%);
            animation: saintGlow 6s ease-in-out infinite;
            pointer-events: none;
        }
        @keyframes saintGlow {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
        }
        .saint-image-container {
            position: relative;
            width: clamp(180px, 30vw, 300px);
            height: clamp(180px, 30vw, 300px);
            margin: 0 auto clamp(20px, 3vw, 30px);
            border-radius: 50%;
            border: clamp(4px, 0.6vw, 6px) solid #FFD700;
            overflow: hidden;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.8), inset 0 0 40px rgba(255, 215, 0, 0.3);
            background: linear-gradient(135deg, #2c1810 0%, #1a0f0a 100%);
            animation: saintImageFloat 4s ease-in-out infinite;
        }
        @keyframes saintImageFloat {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-8px) scale(1.02); }
        }
        .saint-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            font-size: clamp(100px, 18vw, 180px);
            display: flex;
            align-items: center;
            justify-content: center;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.25) 0%, transparent 70%);
        }
        .saint-halo {
            position: absolute;
            top: -10%;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            height: 16%;
            border: clamp(4px, 0.6vw, 6px) solid #FFD700;
            border-radius: 50%;
            box-shadow: 0 0 50px #FFD700, inset 0 0 30px #FFD700;
            animation: haloFloat 3s ease-in-out infinite, haloPulse 2s ease-in-out infinite;
        }
        @keyframes haloFloat {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }
        @keyframes haloPulse {
            0%, 100% {
                box-shadow: 0 0 50px #FFD700, inset 0 0 30px #FFD700;
            }
            50% {
                box-shadow: 0 0 70px #FFD700, inset 0 0 50px #FFD700;
            }
        }
        .saint-title {
            font-family: 'Cinzel', serif;
            font-size: clamp(22px, 4.5vw, 36px);
            color: #FFD700;
            margin-bottom: clamp(12px, 2vw, 20px);
            text-shadow: 3px 3px 0 #000, 0 0 40px #FFD700;
            position: relative;
            z-index: 1;
            animation: titleShimmer 3s ease-in-out infinite;
        }
        @keyframes titleShimmer {
            0%, 100% { text-shadow: 3px 3px 0 #000, 0 0 40px #FFD700; }
            50% { text-shadow: 3px 3px 0 #000, 0 0 60px #FFD700; }
        }
        .saint-virtue {
            font-size: clamp(15px, 2.8vw, 20px);
            color: #87CEEB;
            margin-bottom: clamp(15px, 2.5vw, 25px);
            font-style: italic;
            position: relative;
            z-index: 1;
        }
        .saint-quote {
            font-size: clamp(16px, 3vw, 22px);
            line-height: 1.9;
            color: #f0f0f0;
            margin-bottom: clamp(15px, 2.5vw, 25px);
            text-align: left;
            font-style: italic;
            padding: clamp(20px, 3.5vw, 35px);
            background: rgba(0, 0, 0, 0.6);
            border-left: clamp(4px, 0.6vw, 6px) solid #FFD700;
            border-right: clamp(4px, 0.6vw, 6px) solid #FFD700;
            position: relative;
            z-index: 1;
            border-radius: clamp(10px, 1.5vw, 15px);
        }
        .saint-quote::before {
            content: '"';
            font-size: clamp(50px, 10vw, 80px);
            color: #FFD700;
            position: absolute;
            left: clamp(8px, 1.2vw, 12px);
            top: clamp(-15px, -2vw, -20px);
            opacity: 0.6;
            font-family: Georgia, serif;
        }
        .saint-quote::after {
            content: '"';
            font-size: clamp(50px, 10vw, 80px);
            color: #FFD700;
            position: absolute;
            right: clamp(8px, 1.2vw, 12px);
            bottom: clamp(-40px, -5vw, -50px);
            opacity: 0.6;
            font-family: Georgia, serif;
        }
        .saint-prayer {
            font-family: 'Cinzel', serif;
            font-size: clamp(20px, 4vw, 28px);
            color: #FFD700;
            margin: clamp(20px, 3.5vw, 35px) 0;
            text-shadow: 2px 2px 0 #000, 0 0 20px #FFD700;
            position: relative;
            z-index: 1;
            animation: prayerPulse 2s ease-in-out infinite;
            font-weight: 600;
        }
        @keyframes prayerPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        /* Large Touch-Friendly Continue Button */
        .continue-btn {
            padding: clamp(18px, 3vw, 28px) clamp(40px, 8vw, 80px);
            background: linear-gradient(180deg, #27ae60 0%, #1e8449 100%);
            border: clamp(4px, 0.6vw, 6px) solid #FFD700;
            color: #fff;
            font-family: 'Cinzel', serif;
            font-size: clamp(18px, 3.5vw, 24px);
            cursor: pointer;
            text-shadow: 2px 2px 0 #000;
            box-shadow: 0 clamp(6px, 1vw, 10px) 0 #145a32;
            border-radius: clamp(12px, 2vw, 18px);
            font-weight: 700;
            transition: all 0.2s;
            animation: continueButtonPulse 2s ease-in-out infinite;
            min-height: 60px;
            min-width: 200px;
        }
        @keyframes continueButtonPulse {
            0%, 100% {
                box-shadow: 0 clamp(6px, 1vw, 10px) 0 #145a32, 0 0 20px rgba(39, 174, 96, 0.5);
            }
            50% {
                box-shadow: 0 clamp(6px, 1vw, 10px) 0 #145a32, 0 0 40px rgba(39, 174, 96, 0.8);
            }
        }
        .continue-btn:hover {
            background: linear-gradient(180deg, #2ecc71 0%, #229954 100%);
            transform: translateY(-4px);
            box-shadow: 0 clamp(8px, 1.4vw, 14px) 0 #145a32;
        }
        .continue-btn:active {
            transform: translateY(2px);
            box-shadow: 0 clamp(3px, 0.5vw, 5px) 0 #145a32;
        }
        /* Garden of Eden */
        #gardenModal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a4d2e 0%, #2d5f3f 50%, #4a7c59 100%);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1800;
            padding: clamp(15px, 3vw, 40px);
            overflow: hidden;
        }
        #gardenModal.active {
            display: flex;
            animation: gardenReveal 2s ease-out;
        }
        @keyframes gardenReveal {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        .garden-background {
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 30%, rgba(255, 215, 0, 0.25) 0%, transparent 50%),
            radial-gradient(circle at 80% 70%, rgba(135, 206, 235, 0.25) 0%, transparent 50%),
            linear-gradient(180deg, #87CEEB 0%, #98D8C8 50%, #5D8B6B 100%);
            animation: gardenBreeze 10s ease-in-out infinite;
        }
        @keyframes gardenBreeze {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }
        .garden-flowers {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        .flower {
            position: absolute;
            font-size: clamp(30px, 6vw, 50px);
            animation: flowerSway 3s ease-in-out infinite;
            filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.6));
        }
        @keyframes flowerSway {
            0%, 100% { transform: rotate(-8deg) scale(1); }
            50% { transform: rotate(8deg) scale(1.05); }
        }
        .paradise-sun {
            position: absolute;
            top: clamp(30px, 6vw, 60px);
            right: clamp(40px, 10vw, 100px);
            width: clamp(100px, 18vw, 200px);
            height: clamp(100px, 18vw, 200px);
            background: radial-gradient(circle, #FFD700 0%, #FFA500 100%);
            border-radius: 50%;
            box-shadow: 0 0 120px #FFD700;
            animation: sunGlow 4s ease-in-out infinite;
        }
        @keyframes sunGlow {
            0%, 100% {
                box-shadow: 0 0 120px #FFD700;
                transform: scale(1);
            }
            50% {
                box-shadow: 0 0 180px #FFD700, 0 0 250px #FFA500;
                transform: scale(1.05);
            }
        }
        .garden-content {
            max-width: min(95vw, 950px);
            width: 100%;
            text-align: center;
            position: relative;
            z-index: 10;
            background: rgba(255, 255, 255, 0.96);
            padding: clamp(35px, 6vw, 70px);
            border-radius: clamp(25px, 3.5vw, 35px);
            box-shadow: 0 0 100px rgba(255, 215, 0, 1);
            border: clamp(5px, 0.8vw, 8px) solid #FFD700;
            max-height: 85vh;
            overflow-y: auto;
        }
        .garden-title {
            font-family: 'Cinzel', serif;
            font-size: clamp(32px, 7vw, 56px);
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #FFD700 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: clamp(20px, 3.5vw, 35px);
            animation: titleShine 3s ease-in-out infinite;
            font-weight: 700;
        }
        @keyframes titleShine {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.4); }
        }
        .jesus-image {
            font-size: clamp(80px, 15vw, 140px);
            margin: clamp(20px, 3.5vw, 35px) 0;
            filter: drop-shadow(0 0 40px rgba(255, 215, 0, 1));
            animation: jesusGlow 2s ease-in-out infinite;
            display: inline-block;
        }
        @keyframes jesusGlow {
            0%, 100% {
                transform: scale(1);
                filter: drop-shadow(0 0 40px rgba(255, 215, 0, 1));
            }
            50% {
                transform: scale(1.12);
                filter: drop-shadow(0 0 70px rgba(255, 215, 0, 1));
            }
        }
        .garden-text {
            font-size: clamp(17px, 3.2vw, 24px);
            line-height: 2;
            color: #2c1810;
            margin-bottom: clamp(18px, 3vw, 30px);
            text-align: left;
            font-style: italic;
        }
        .garden-verse {
            font-size: clamp(16px, 3vw, 22px);
            color: #8B4513;
            margin: clamp(20px, 3.5vw, 35px) 0;
            padding: clamp(18px, 3vw, 30px);
            background: rgba(255, 215, 0, 0.25);
            border-radius: clamp(15px, 2vw, 20px);
            border: clamp(3px, 0.5vw, 5px) solid #FFD700;
            font-weight: 600;
            text-align: left;
        }
        .enter-garden-btn {
            padding: clamp(20px, 3.5vw, 32px) clamp(50px, 10vw, 90px);
            background: linear-gradient(180deg, #FFD700 0%, #FFA500 100%);
            border: clamp(4px, 0.7vw, 7px) solid #8B6914;
            color: #000;
            font-family: 'Cinzel', serif;
            font-size: clamp(18px, 3.5vw, 26px);
            cursor: pointer;
            font-weight: 700;
            text-shadow: 1px 1px 0 rgba(255, 255, 255, 0.5);
            box-shadow: 0 clamp(6px, 1.2vw, 12px) 0 #6B5410;
            border-radius: clamp(15px, 2vw, 20px);
            transition: all 0.3s;
            text-transform: uppercase;
            animation: buttonGlow 2s ease-in-out infinite;
            min-height: 70px;
        }
        @keyframes buttonGlow {
            0%, 100% {
                box-shadow: 0 clamp(6px, 1.2vw, 12px) 0 #6B5410, 0 0 30px rgba(255, 215, 0, 0.6);
            }
            50% {
                box-shadow: 0 clamp(6px, 1.2vw, 12px) 0 #6B5410, 0 0 50px rgba(255, 215, 0, 0.9);
            }
        }
        .enter-garden-btn:hover {
            background: linear-gradient(180deg, #FFEB3B 0%, #FFB300 100%);
            transform: translateY(-5px);
        }
        .enter-garden-btn:active {
            transform: translateY(3px);
        }
        /* Paradise Scene */
        #paradiseScene {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, #87CEEB 0%, #E0F6FF 50%, #90EE90 100%);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            overflow: hidden;
            padding: clamp(15px, 3vw, 40px);
        }
        #paradiseScene.active {
            display: flex;
            animation: paradiseFade 3s ease-out;
        }
        @keyframes paradiseFade {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .paradise-content {
            text-align: center;
            z-index: 10;
            background: rgba(255, 255, 255, 0.92);
            padding: clamp(40px, 7vw, 90px);
            border-radius: clamp(30px, 4.5vw, 45px);
            box-shadow: 0 0 120px rgba(255, 215, 0, 1);
            border: clamp(6px, 1vw, 10px) solid #FFD700;
            max-width: min(95vw, 1050px);
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
        }
        .paradise-title {
            font-family: 'Cinzel', serif;
            font-size: clamp(36px, 8vw, 64px);
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 50%, #FFD700 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: clamp(25px, 4.5vw, 45px);
            animation: titleRainbow 3s ease-in-out infinite;
            font-weight: 700;
        }
        @keyframes titleRainbow {
            0%, 100% { filter: hue-rotate(0deg) brightness(1.3); }
            50% { filter: hue-rotate(25deg) brightness(1.6); }
        }
        .paradise-message {
            font-size: clamp(18px, 3.5vw, 26px);
            line-height: 2.1;
            color: #2c1810;
            margin-bottom: clamp(25px, 4.5vw, 45px);
            font-style: italic;
            text-align: left;
        }
        .paradise-blessing {
            font-family: 'Cinzel', serif;
            font-size: clamp(20px, 4vw, 32px);
            color: #8B4513;
            margin: clamp(25px, 4.5vw, 45px) 0;
            padding: clamp(22px, 3.5vw, 35px);
            background: rgba(255, 215, 0, 0.35);
            border-radius: clamp(18px, 2.5vw, 25px);
            font-weight: 600;
            text-align: left;
        }

        /* New Styles for Combat and Quests */
        #combatModal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1900;
            padding: clamp(15px, 3vw, 40px);
        }
        #combatModal.active {
            display: flex;
        }
        .combat-content {
            max-width: min(95vw, 900px);
            width: 100%;
            background: linear-gradient(135deg, rgba(15, 12, 41, 0.98), rgba(48, 43, 99, 0.98));
            padding: clamp(25px, 5vw, 50px);
            border: clamp(3px, 0.5vw, 5px) solid #FFD700;
            border-radius: clamp(15px, 2vw, 20px);
            box-shadow: 0 0 70px rgba(255, 215, 0, 0.9);
            text-align: center;
        }
        .combat-arena {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .player-side, .enemy-side {
            width: 45%;
        }
        .combat-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .attack-btn {
            padding: 10px 20px;
            background: #ff4500;
            color: #fff;
            border: none;
            cursor: pointer;
        }
        #questLog {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            padding: 10px;
            border: 1px solid #ffd700;
            display: none;
        }
        #questLog.active {
            display: block;
        }
        /* Added Sprite Enhancements */
        /* === SPRITE SHEET SYSTEM (added for higher quality) === */
        .sprite-sheet {
            width: 64px; height: 64px;
            image-rendering: pixelated;
            background-image: url('https://opengameart.org/sites/default/files/angel-sprite-sheet.png'); /* Example angel sprite sheet */
            background-size: 256px 256px; /* 4 frames √ó 4 directions */
            animation: spriteWalk 0.6s steps(4) infinite;
        }
        @keyframes spriteWalk { 0% {background-position:0 0} 25%{background-position:-64px 0} 50%{background-position:-128px 0} 75%{background-position:-192px 0} }

        /* Player (Angel) */
        .player-sprite { background-position: 0 0; animation: spriteWalk 0.8s steps(4) infinite; }
        .enemy-sprite { background-position: 0 -64px; animation: enemyBob 1.2s infinite; }
        @keyframes enemyBob { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-8px)} }

        /* Saint victory sprites (64px) */
        .saint-sprite { width:96px; height:96px; margin:20px auto; image-rendering:pixelated; }

        /* In combat modal, replace .sprite-angel and .sprite-enemy classes with: */
        .player-side { background: url('https://opengameart.org/sites/default/files/angel-sprite-sheet.png') no-repeat center; background-size:64px; height:100px; }
        .enemy-side { background: url('https://opengameart.org/sites/default/files/7-deadly-sins-pixel-art.png') no-repeat center; background-size:64px; height:100px; }
        /* Progress Bar */
        #progress-bar {
            position: absolute;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
            width: 80%;
            background: #333;
            border: 1px solid #ffd700;
            height: 20px;
        }
        #progress-fill {
            height: 100%;
            background: #ffd700;
            width: 0%;
        }
        /* Credits Section */
        #credits {
            padding: 20px;
            text-align: center;
            display: none;
        }
        #credits.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="responsive-container">
        <!-- Existing Modals -->
        <div id="saintModal">
            <div class="saint-content">
                <div class="saint-image-container">
                    <div class="saint-image"></div>
                    <div class="saint-halo"></div>
                </div>
                <h2 class="saint-title"></h2>
                <p class="saint-virtue"></p>
                <p class="saint-quote"></p>
                <p class="saint-prayer">Saint, pray for us!</p>
                <button class="continue-btn" onclick="document.getElementById('saintModal').classList.remove('active')">Continue</button>
            </div>
        </div>
        <div id="gardenModal">
            <div class="garden-background"></div>
            <div class="garden-flowers">
                <!-- Add flower elements -->
                <div class="flower" style="left:10%; top:20%;">üå∏</div>
                <div class="flower" style="left:30%; top:60%;">üåº</div>
                <div class="flower" style="left:70%; top:40%;">üå∫</div>
            </div>
            <div class="paradise-sun"></div>
            <div class="garden-content">
                <h1 class="garden-title">Garden of Eden</h1>
                <div class="jesus-image">‚úùÔ∏è</div>
                <p class="garden-text">You have entered the Garden...</p>
                <p class="garden-verse">"Come to me..." ‚Äî Matthew 11:28</p>
                <button class="enter-garden-btn" onclick="document.getElementById('gardenModal').classList.remove('active'); document.getElementById('paradiseScene').classList.add('active')">Enter</button>
            </div>
        </div>
        <div id="paradiseScene">
            <div class="paradise-content">
                <h1 class="paradise-title">Welcome to Paradise</h1>
                <p class="paradise-message">You walk with Jesus...</p>
                <p class="paradise-blessing">"Well done..." ‚Äî Matthew 25:23</p>
                <button onclick="document.getElementById('paradiseScene').classList.remove('active'); document.getElementById('credits').classList.add('active')">View Credits</button>
            </div>
        </div>

        <!-- New Combat Modal -->
        <div id="combatModal">
            <div class="combat-content">
                <div class="combat-arena">
                    <div class="player-side player-sprite">
                        <div id="playerHp">HP: 100</div>
                    </div>
                    <div class="enemy-side enemy-sprite">
                        <div id="enemyHp">HP: 100</div>
                    </div>
                </div>
                <div class="combat-buttons">
                    <button class="attack-btn" onclick="playerAttack()">Attack</button>
                    <button class="attack-btn" onclick="playerHeal()">Heal</button>
                    <button class="attack-btn" onclick="endCombat()">Run</button>
                </div>
                <div id="combatMessage"></div>
            </div>
        </div>

        <!-- Quest Log -->
        <div id="questLog">
            <h3>Quests</h3>
            <ul id="questList"></ul>
        </div>

        <!-- Progress Bar -->
        <div id="progress-bar">
            <div id="progress-fill"></div>
        </div>

        <!-- Main Game Area -->
        <div id="mainGame">
            <button onclick="toggleQuestLog()">Quest Log</button>
            <button onclick="saveGame()">Save</button>
            <button onclick="loadGame()">Load</button>
            <button onclick="document.querySelectorAll('div[id$=\"Modal\"]').forEach(m => m.classList.remove('active'))">Return to World</button>
        </div>

        <!-- Credits Section incorporating provided content -->
        <div id="credits">
            <h1>Battle for Virtue - Complete Edition</h1>
            <p>"Man is divided in himself. As a result, the whole life of men, both individual and social, shows itself to be a struggle, and a dramatic one, between good and evil, between light and darkness."</p>
            <p>‚Äî Catechism of the Catholic Church, 409</p>
            <p>"The struggle against our inclinations toward evil is not easy; every man experiences it within himself. As a result, the entire life of man is a combat against the powers of darkness."</p>
            <p>‚úù IT'S UP TO YOU TO FIGHT FOR WHAT'S GOOD IN THE WORLD ‚úù</p>
            <h2>‚õ™ THE SAINTS ‚õ™</h2>
            <ul>
                <li>üïäÔ∏è St. Francis of Assisi</li>
                <li>üìñ St. Thomas Aquinas</li>
                <li>‚õ™ St. John Vianney</li>
                <li>üåπ St. Th√©r√®se of Lisieux</li>
                <li>üéÅ St. Nicholas of Myra</li>
                <li>‚úùÔ∏è St. Catherine of Siena</li>
                <li>ü§ç St. Maria Goretti</li>
                <li>ü™Ω St. Vincent Ferrer</li>
            </ul>
            <h2>‚úù ü´ì THE WORD OF GOD ü´ì ‚úù</h2>
            <p>"Whosoever eateth my flesh, and drinketh my blood, hath eternal life; and I will raise him up at the last day. For my flesh is meat indeed, and my blood is drink indeed. He that eateth my flesh, and drinketh my blood, dwelleth in me, and I in him. As the living Father hath sent me, and I live by the Father: so he that eateth me, even he shall live by me. This is that bread which came down from heaven: not as your fathers did eat manna, and are dead: he that eateth of this bread shall live for ever."</p>
            <p>‚Äî John 6:51-58</p>
            <h2>THE VIRTUES</h2>
            <p>"Human virtues are firm attitudes, stable dispositions, habitual perfections of intellect and will that govern our actions, order our passions, and guide our conduct according to reason and faith. They make possible ease, self-mastery, and joy in leading a morally good life."</p>
            <p>‚Äî CCC 1804</p>
            <h2>THE CALL TO HOLINESS</h2>
            <p>"All Christians in any state or walk of life are called to the fullness of Christian life and to the perfection of charity. All are called to holiness: 'Be perfect, as your heavenly Father is perfect.'"</p>
            <p>‚Äî CCC 2013</p>
            <button onclick="location.reload()">Play Again</button>
        </div>
    </div>
    <audio id="hit" src="https://freesound.org/data/previews/276/276951_5121236-lq.mp3"></audio>
    <audio id="victory" src="https://freesound.org/data/previews/321/321552_5121236-lq.mp3"></audio>
    <script>
        // Player Data
        let player = {
            hp: 100,
            maxHp: 100,
            virtues: [] // Collected virtues from quests
        };

        let equippedVirtues = [];

        // All 7 Deadly Sins as Enemies (Vices)
        const vices = [
            { name: 'Pride', hp: 100, maxHp: 100, attack: 20, virtue: 'Humility' },
            { name: 'Greed', hp: 120, maxHp: 120, attack: 25, virtue: 'Generosity' },
            { name: 'Lust', hp: 90, maxHp: 90, attack: 15, virtue: 'Chastity' },
            { name: 'Envy', hp: 110, maxHp: 110, attack: 22, virtue: 'Kindness' },
            { name: 'Gluttony', hp: 130, maxHp: 130, attack: 28, virtue: 'Temperance' },
            { name: 'Wrath', hp: 140, maxHp: 140, attack: 30, virtue: 'Patience' },
            { name: 'Sloth', hp: 80, maxHp: 80, attack: 10, virtue: 'Diligence' }
        ];

        let currentEnemy = null;

        // Quests for each sin
        const quests = vices.map((vice, id) => ({
            id,
            name: `Defeat ${vice.name}`,
            description: `Battle the vice of ${vice.name} to gain the virtue of ${vice.virtue}.`,
            completed: false,
            reward: vice.virtue
        }));

        // Saints associated with virtues
        const saints = [
            { virtue: 'Humility', name: 'St. Francis of Assisi', image: 'üïäÔ∏è', quote: 'Preach the Gospel at all times and when necessary use words.' },
            { virtue: 'Generosity', name: 'St. Nicholas of Myra', image: 'üéÅ', quote: 'The giver of every good and perfect gift has called upon us to mimic His giving.' },
            { virtue: 'Chastity', name: 'St. Maria Goretti', image: 'ü§ç', quote: 'Young people, do not be afraid to be saints.' },
            { virtue: 'Kindness', name: 'St. Th√©r√®se of Lisieux', image: 'üåπ', quote: 'Holiness does not consist in this or that practice; it consists in loving God.' },
            { virtue: 'Temperance', name: 'St. Thomas Aquinas', image: 'üìñ', quote: 'To one who has faith, no explanation is necessary.' },
            { virtue: 'Patience', name: 'St. Catherine of Siena', image: '‚úùÔ∏è', quote: 'You are rewarded not according to your work or your time but according to the measure of your love.' },
            { virtue: 'Diligence', name: 'St. John Vianney', image: '‚õ™', quote: 'Prayer is the inner bath of love into which the soul plunges itself.' }
        ];

        // Start Combat
        function startCombat(viceIndex) {
            currentEnemy = { ...vices[viceIndex] };
            document.getElementById('enemyHp').innerText = `HP: ${currentEnemy.hp}`;
            document.getElementById('playerHp').innerText = `HP: ${player.hp}`;
            document.getElementById('combatMessage').innerText = `Battle against ${currentEnemy.name} begins!`;
            document.getElementById('combatModal').classList.add('active');
        }

        // Player Attack with ATB QTE
        function playerAttack() {
            if (!currentEnemy) return;
            document.getElementById('combatMessage').innerText = 'Focus your virtue...';
            // QTE bar
            let qte = document.createElement('div'); qte.id='qte-bar'; qte.style.cssText='height:8px;background:#0f0;width:0;';
            document.querySelector('.combat-buttons').prepend(qte);
            let w = 0; let timer = setInterval(()=>{ w+=2; qte.style.width=w+'%'; if(w>=100){clearInterval(timer); doDamage();} },20);
            function doDamage(){
                let bonus = equippedVirtues.length * 5;
                let dmg = 15 + bonus + Math.floor(Math.random()*25);
                currentEnemy.hp -= dmg;
                document.getElementById('hit').play();
                document.getElementById('combatMessage').innerText = `Virtue strike! ${dmg} damage!`;
                document.getElementById('enemyHp').innerText = `HP: ${Math.max(0, currentEnemy.hp)}`;
                if (currentEnemy.hp <= 0) {
                    winCombat();
                    return;
                }
                enemyAttack();
            }
        }

        // Player Heal
        function playerHeal() {
            const heal = Math.floor(Math.random() * 20) + 10;
            player.hp = Math.min(player.maxHp, player.hp + heal);
            document.getElementById('combatMessage').innerText = `You prayed and healed ${heal} HP!`;
            document.getElementById('playerHp').innerText = `HP: ${player.hp}`;
            enemyAttack();
        }

        // Enemy Attack
        function enemyAttack() {
            const damage = Math.floor(Math.random() * currentEnemy.attack) + 5;
            player.hp -= damage;
            document.getElementById('combatMessage').innerText += `\n${currentEnemy.name} attacked for ${damage} damage!`;
            document.getElementById('playerHp').innerText = `HP: ${Math.max(0, player.hp)}`;
            if (player.hp <= 0) {
                loseCombat();
            }
        }

        // Win Combat
        function winCombat() {
            const questId = vices.findIndex(v => v.name === currentEnemy.name);
            quests[questId].completed = true;
            player.virtues.push(quests[questId].reward);
            equippedVirtues.push(quests[questId].reward);
            document.getElementById('victory').play();
            document.getElementById('combatMessage').innerText += `\nYou defeated ${currentEnemy.name} and gained the virtue of ${quests[questId].reward}!`;
            updateQuestLog();
            updateProgress();
            showSaintModal(quests[questId].reward);
            checkAllCompleted();
            setTimeout(endCombat, 3000);
        }

        // Show Saint Modal
        function showSaintModal(virtue) {
            const saint = saints.find(s => s.virtue === virtue);
            if (saint) {
                document.querySelector('.saint-title').innerText = saint.name;
                document.querySelector('.saint-image').innerText = saint.image;
                document.querySelector('.saint-quote').innerText = saint.quote;
                document.getElementById('saintModal').classList.add('active');
            }
        }

        // Lose Combat
        function loseCombat() {
            document.getElementById('combatMessage').innerText += '\nYou were defeated. Pray harder next time...';
            player.hp = player.maxHp;
            setTimeout(endCombat, 2000);
        }

        // End Combat
        function endCombat() {
            document.getElementById('combatModal').classList.remove('active');
            currentEnemy = null;
        }

        // Start Quest
        function startQuest(questId) {
            if (quests[questId].completed) {
                alert('Quest already completed!');
                return;
            }
            startCombat(questId);
        }

        // Toggle Quest Log
        function toggleQuestLog() {
            const log = document.getElementById('questLog');
            log.classList.toggle('active');
            updateQuestLog();
        }

        // Update Quest Log
        function updateQuestLog() {
            const list = document.getElementById('questList');
            list.innerHTML = '';
            quests.forEach(q => {
                const li = document.createElement('li');
                li.innerText = `${q.name}: ${q.description} - ${q.completed ? 'Completed' : 'Pending'}`;
                if (!q.completed) {
                    const btn = document.createElement('button');
                    btn.innerText = 'Start Quest';
                    btn.onclick = () => startQuest(q.id);
                    li.appendChild(btn);
                }
                list.appendChild(li);
            });
        }

        // Update Progress Bar
        function updateProgress() {
            const completed = player.virtues.length;
            const total = quests.length;
            const percent = (completed / total) * 100;
            document.getElementById('progress-fill').style.width = `${percent}%`;
            if (percent === 100) {
                document.getElementById('progress-fill').style.filter = 'drop-shadow(0 0 15px gold)';
            }
        }

        // Check if all quests completed
        function checkAllCompleted() {
            if (player.virtues.length === quests.length) {
                document.getElementById('gardenModal').classList.add('active');
            }
        }

        // Save and Load
        function saveGame() {
            localStorage.setItem('virtueRPG', JSON.stringify({player, equippedVirtues, quests}));
        }
        function loadGame() {
            const s = localStorage.getItem('virtueRPG');
            if (s) {
                const d = JSON.parse(s);
                player = d.player;
                equippedVirtues = d.equippedVirtues || [];
                quests = d.quests || quests;
                updateQuestLog();
                updateProgress();
            }
        }

        // Initialize
        function init() {
            loadGame(); // Load on start
            updateQuestLog();
            updateProgress();
        }

        init();
    </script>
</body>
</html>
